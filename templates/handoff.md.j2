# Your vibehost Server

Provisioned: {{ date }}

## Quick Connect

**Host (management only)**
```
ssh {{ admin_user }}@{{ host_ip }}
```

**Dev container**
```
ssh root@{{ dev_ip }}
```

**Staging container**
```
ssh root@{{ staging_ip }}
```

**Prod container**
```
ssh root@{{ prod_ip }}
```

## Your Containers

| Name     | Public IP       | Private IP           | Purpose              |
|----------|-----------------|----------------------|----------------------|
| dev      | {{ dev_ip }}    | 10.10.10.2           | Development          |
| staging  | {{ staging_ip }}| 10.10.10.3           | Pre-production       |
| prod     | {{ prod_ip }}   | 10.10.10.4           | Live projects        |
| postgres | (none)          | {{ postgres_private_ip }} | Database        |
{% if spare_ip %}| spare    | {{ spare_ip }}  | â€”                    | Future use           |{% endif %}

## Database Connections

From any container, connect to PostgreSQL at `{{ postgres_private_ip }}:5432`

{% for db in databases %}
### {{ db.name }}

```
Host: {{ postgres_private_ip }}
Port: 5432
Database: {{ db.name }}
User: {{ db.user }}
Password: {{ db.password }}
```

**Connection string:**
```
postgresql://{{ db.user }}:{{ db.password }}@{{ postgres_private_ip }}:5432/{{ db.name }}
```

{% endfor %}

## Dev Environment

Your dev container has these pre-installed:

**Python {{ python_version }}** with:
{% for pkg in python_packages %}- {{ pkg }}
{% endfor %}

**Node.js {{ node_version }}** with:
{% for pkg in node_packages %}- {{ pkg }}
{% endfor %}

**Tools:**
{% if extras.claude_code %}- Claude Code CLI{% endif %}
{% if extras.docker %}- Docker{% endif %}
{% if extras.certbot %}- Certbot{% endif %}
- uv (fast Python package manager)
- direnv
- tmux
- htop

### Start Jupyter

```bash
jupyter notebook --ip=0.0.0.0 --port=8888
```

Then visit: `http://{{ dev_ip }}:8888`

### Using uv for Python

```bash
# Create a new project
uv init myproject && cd myproject

# Add dependencies
uv add requests pandas

# Run scripts
uv run python script.py
```

## Backups

**Automatic snapshots:** {{ snapshot_schedule }} (cron), kept for {{ snapshot_retention }} days

{% if offsite_enabled %}
**Offsite backups:** {{ offsite_schedule }} (cron), kept for {{ offsite_retention }} weeks
{% endif %}

**List snapshots:**
```bash
incus snapshot list dev
```

**Restore a snapshot:**
```bash
incus snapshot restore dev daily-20250115
```

**Database dumps location:** `/var/lib/incus/backups/postgres/`

{% if storagebox_pubkey %}
### Storage Box Setup

Add this SSH public key to your Hetzner Storage Box:
```
{{ storagebox_pubkey }}
```
{% endif %}

## Common Tasks

**SSH into a container from host:**
```bash
incus exec dev -- bash
```

**Check container resource usage:**
```bash
incus info dev
```

**Restart a container:**
```bash
incus restart prod
```

**View container logs:**
```bash
incus console staging --show-log
```

**Copy files to container:**
```bash
incus file push local-file.txt dev/root/
```

**Copy files from container:**
```bash
incus file pull dev/root/file.txt ./
```

## Firewall

Each container allows:
{% for rule in firewall_rules %}- {{ rule }}
{% endfor %}

**Open additional port (e.g., for dev server):**
```bash
# Inside the container
ufw allow 3000/tcp
```

**Check firewall status:**
```bash
ufw status
```

## Container Management

**Start all containers:**
```bash
incus start --all
```

**Stop all containers:**
```bash
incus stop --all
```

**View resource usage:**
```bash
incus info dev --resources
```

## Need Help?

- **Password issues:** Contact your admin - they can reset via host access
- **Container won't start:** Check `incus info [container]` for details
- **Database connection issues:** Verify you're using `{{ postgres_private_ip }}`
- **Disk space:** Run `ncdu /` inside container to find large files

---
*Generated by vibehost-setup*
